language: python
python:
    - 2.7
    - 3.2
    - 3.3
    - pypy
env:
    # pypy takes longer to start
    - PRETZEL_TEST_TIMEOUT=30
install:
    pip install coveralls --use-mirrors
before_script:
    # ssh login on localhost
    - ssh-keygen -f ~/.ssh/id_rsa -N ""
    - cp ~/.ssh/{id_rsa.pub,authorized_keys}
script:
    - cd ..
    - coverage run -m unittest pretzel
    - mv .coverage pretzel
    - cd pretzel
after_success:
    coveralls
notifications:
    email: false
